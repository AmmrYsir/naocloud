---
/**
 * Sidebar.astro â€“ Collapsible sidebar navigation.
 * On mobile, it becomes a bottom navigation bar.
 */
interface NavItem {
	label: string;
	href: string;
	icon: string;
}

const items: NavItem[] = [
	{
		label: "Dashboard",
		href: "/",
		icon: `<svg class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><rect x="3" y="3" width="7" height="7" rx="1"/><rect x="14" y="3" width="7" height="7" rx="1"/><rect x="3" y="14" width="7" height="7" rx="1"/><rect x="14" y="14" width="7" height="7" rx="1"/></svg>`,
	},
	{
		label: "Docker",
		href: "/docker",
		icon: `<svg class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path d="M21 8c-1.45 0-2.26.15-3 .5-1.12-1.28-2.7-2-4.5-2h-3c-1.8 0-3.38.72-4.5 2C5.26 8.15 4.45 8 3 8c-1 0-1 2 0 2 .6 0 1 .1 1.4.3C4.15 11.4 4 12.6 4 14c0 3.32 2.68 6 6 6h4c3.32 0 6-2.68 6-6 0-1.4-.15-2.6-.4-3.7.4-.2.8-.3 1.4-.3 1 0 1-2 0-2z"/></svg>`,
	},
	{
		label: "System",
		href: "/system",
		icon: `<svg class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><rect x="2" y="3" width="20" height="14" rx="2"/><path d="M8 21h8m-4-4v4"/></svg>`,
	},
	{
		label: "Settings",
		href: "/settings",
		icon: `<svg class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="3"/><path d="M12 1v2m0 18v2M4.22 4.22l1.42 1.42m12.72 12.72 1.42 1.42M1 12h2m18 0h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"/></svg>`,
	},
];

const currentPath = Astro.url.pathname;
---

<!-- Desktop Sidebar -->
<aside
	class="hidden md:flex fixed left-0 top-0 z-40 h-screen w-64 flex-col border-r border-border-dim bg-panel/60 backdrop-blur-xl pt-[60px]"
>
	<nav class="flex-1 space-y-1 px-3 py-4">
		{
			items.map((item) => {
				const active =
					currentPath === item.href ||
					(item.href !== "/" && currentPath.startsWith(item.href));
				return (
					<a
						href={item.href}
						class:list={[
							"flex items-center gap-3 rounded-xl px-4 py-2.5 text-sm font-medium transition-all",
							active
								? "bg-accent/20 text-accent shadow-sm"
								: "text-gray-400 hover:bg-white/5 hover:text-gray-200",
						]}
					>
						<Fragment set:html={item.icon} />
						{item.label}
					</a>
				);
			})
		}
	</nav>

	<div class="border-t border-border-dim p-4 text-xs text-gray-500">
		ServerPilot v1.0.0
	</div>
</aside>

<!-- Mobile Bottom Nav -->
<nav
	class="md:hidden fixed bottom-0 left-0 right-0 z-50 flex items-center justify-around border-t border-border-dim bg-panel/90 backdrop-blur-xl px-2 py-2"
>
	{
		items.map((item) => {
			const active =
				currentPath === item.href ||
				(item.href !== "/" && currentPath.startsWith(item.href));
			return (
				<a
					href={item.href}
					class:list={[
						"flex flex-col items-center gap-1 rounded-xl px-3 py-1.5 text-[10px] font-medium transition",
						active
							? "text-accent"
							: "text-gray-500 hover:text-gray-300",
					]}
				>
					<Fragment set:html={item.icon} />
					{item.label}
				</a>
			);
		})
	}
</nav>
